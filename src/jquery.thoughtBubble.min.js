(function(e){e.fn.thoughtBubble=function(t){var n=e.extend({backgroundColor:"white",fontColor:"black",width:"330px",height:"210px",fontSize:"15px",bubbleColor:"white",speed:125},t),r=function(e){var t=e.offset(),r=t.top-parseInt(n.height),s='"position: absolute; top:'+r+"px; left:"+t.left+"px ; width:"+n.width+"; height:"+n.height+';"',u="<div class='bubble-holder' style="+s+">"+i()+o()+"</div>";return u},i=function(){return'<div class="main-bubble-holder"><div class="bubble main-bubble">'+s()+"</div></div>"},s=function(){return'<span style="vertical-align: middle; color: '+n.fontColor+";font-size: "+n.fontSize+"; font-family: "+n.font+'">'+n.text+"</span>"},o=function(){return'<div class="sm-bubble-holder"><div class="bubble bubbleLg"></div><div class="bubble bubbleMd"></div><div class="bubble bubbleSm"></div></div>'},u=function(){var t=e(document).find(".bubble"),r=t.get().reverse(),i=n.speed;e(r[0]).stop().animate({opacity:1},i,function(){e(r[1]).animate({opacity:1},i,function(){e(r[2]).animate({opacity:1},i,function(){e(r[3]).animate({opacity:1},i)})})})},a=function(){var t=e(document).find(".bubble");t.stop().animate({opacity:0})},f=function(t){var n=e(document).find(".bubble-holder"),r=t.offset().left;n.css("left",r)};return this.each(function(){var t=e(this),n=r(t);t.on("mouseenter",u);t.on("mouseout",a);e(window).on("resize",f.bind(this,t));return t.parent().prepend(n)})}})(jQuery)